package com.xuxian.marketpro.presentation.View.adapter;import android.content.Context;import android.graphics.Color;import android.support.v4.view.ViewCompat;import android.view.View;import android.view.ViewGroup;import android.widget.BaseAdapter;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.TextView;import com.ab.util.AbPreferenceUtils;import com.xuxian.marketpro.R;import com.xuxian.marketpro.presentation.db.ShoppingCartGoodsDb;import com.xuxian.marketpro.presentation.entity.StoreEntity;import java.util.ArrayList;import java.util.List;/** * Created by youarenotin on 16/7/27. */public class StoreAdapter extends BaseAdapter {    private ShoppingCartGoodsDb detailsDb;        private Context mContext;    private List<StoreEntity> mListData = new ArrayList<>();    private OnShopItemListener onShopItemListener;    private int store_id;    public StoreAdapter(Context mContext) {        this.mContext = mContext;    }    public interface OnShopItemListener {        void showOverLayPop(StoreEntity storeEntity);    }    class LaunchHolder {        ImageView iv_shop_details;        ImageView iv_store_status;        LinearLayout ll_enter_shop;        LinearLayout ll_enter_shop_detail;        TextView mLaunchDistanceItemTitle;        TextView mLaunchTitleItemSite;        LaunchHolder() {        }    }    class ViewHolder {        LinearLayout mMainMoreClick;        TextView title;        ViewHolder() {        }    }    public void setOnShopItemClickListener(OnShopItemListener onShopItemListener) {        this.onShopItemListener = onShopItemListener;    }    public void setData(List<StoreEntity> list){        this.mListData=list;        notifyDataSetChanged();    }    @Override    public int getCount() {        if (mListData.isEmpty() || mListData==null){            return 0;        }        return mListData.size();    }    @Override    public Object getItem(int i) {        return mListData.get(i);    }    @Override    public long getItemId(int i) {        return i;    }    @Override    public View getView(int i, View view, ViewGroup viewGroup) {        LaunchHolder holder;        if (view==null)        {            view=View.inflate(mContext, R.layout.launch_shop_site_item_03,null);            holder=new LaunchHolder();            holder.mLaunchTitleItemSite= (TextView) view.findViewById(R.id.launch_title_item_site);            holder.iv_shop_details= (ImageView) view.findViewById(R.id.iv_shop_details);            holder.iv_store_status= (ImageView) view.findViewById(R.id.iv_store_status);            holder.ll_enter_shop_detail= (LinearLayout) view.findViewById(R.id.ll_enter_shop_detail);            holder.ll_enter_shop= (LinearLayout) view.findViewById(R.id.ll_enter_shop);            holder.mLaunchDistanceItemTitle= (TextView) view.findViewById(R.id.launch_distance_item_title);            view.setTag(holder);        }else{            holder= (LaunchHolder) view.getTag();        }        StoreEntity storeEntity = mListData.get(i);        holder.mLaunchDistanceItemTitle.setText(storeEntity.getTitle());        holder.mLaunchTitleItemSite.setText(storeEntity.getDistance());        if (storeEntity.getStore_status()==1){            holder.iv_store_status.setVisibility(View.VISIBLE);            holder.iv_store_status.setBackgroundResource(R.drawable.jijiangkaiye_icon);        }else if(storeEntity.getStore_status()==2){            holder.iv_store_status.setVisibility(View.VISIBLE);            holder.iv_store_status.setBackgroundResource(R.drawable.zhuangxiu_icon);        }        else if(storeEntity.getStore_status()==3){            holder.iv_store_status.setVisibility(View.VISIBLE);            holder.iv_store_status.setBackgroundResource(R.drawable.xindian_icon);        }else{            holder.iv_store_status.setVisibility(View.GONE);        }        if (storeEntity.getId()== AbPreferenceUtils.loadPrefInt(mContext,"site_id",0)){            holder.mLaunchDistanceItemTitle.setTextColor(Color.parseColor("#4ea661"));        }else{            holder.mLaunchDistanceItemTitle.setTextColor(ViewCompat.MEASURED_STATE_MASK);        }        view.setBackgroundResource(R.drawable.light_yellow_selector);        holder.ll_enter_shop.setOnClickListener(new EnterShopOnClickListener(storeEntity));        holder.ll_enter_shop_detail.setOnClickListener(new EnterDetailOnClickListener(storeEntity));        return view;    }    class EnterShopOnClickListener implements View.OnClickListener{        private  StoreEntity storeEntity;        public EnterShopOnClickListener(StoreEntity storeEntity) {            this.storeEntity = storeEntity;        }        @Override        public void onClick(View view) {            onShopItemListener.showOverLayPop(storeEntity);        }    }    class EnterDetailOnClickListener implements View.OnClickListener{        private StoreEntity storeEntity;        public EnterDetailOnClickListener(StoreEntity storeEntity) {            this.storeEntity = storeEntity;        }        @Override        public void onClick(View view) {            //// TODO: 16/7/27 ActivityUtil.startStoreDetailsActivity(StoreAdapter.this.mContext, this.val$storeEntity);        }    }}